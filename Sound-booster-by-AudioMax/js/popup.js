!function(){const e="fetch-gain-value",t=[{id:"1111",title:"",message:'If you like Volume Booster please take a minute and rate it on <a href="https://chrome.google.com/webstore/detail/volume-booster/bdbedpgdcnjmnccdappdddadbcdichio/reviews" target="_blank" tabindex="-1">Chrome Web Store</a>',dateFrom:"2021-02-24",dateTo:"2031-12-31",fromInstall:4}],n=(e,t,n=(()=>{}))=>{const a={[e]:JSON.stringify(t)};chrome.storage.local.set(a,n)},a=(e,t,n=(()=>{}))=>{const a={[e]:JSON.stringify(t)};chrome.storage.local.get(a,(t=>{n(JSON.parse(t[e]))}))},o={updateBadge:(e,t)=>{chrome.browserAction.setBadgeText({text:`${t}`,tabId:e})}};let r={date:new Date,installationDate:new Date,usedIds:[]};const s=e=>{a("installation-date",null,(e=>{e?r.installationDate=new Date(e):(r.installationDate=new Date,n("installation-date",r.installationDate))})),(e=>{a("announcements",[],(t=>{r.usedIds=t,e()}))})(e),document.addEventListener("click",(e=>{const t=e.target.closest(".announcement-close");t&&((e=>{r.usedIds.push(e),n("announcements",r.usedIds)})(t.dataset.id),t.closest(".announcement").classList.remove("is-active"),document.querySelector("html").style.minHeight="auto")}))};let l;const i=document.getElementById("volume-range");let d=document.getElementById("volume-current");const u=document.querySelector(".tabs-title"),c=document.querySelector(".tabs-list");$(".header-description").html(chrome.i18n.getMessage("header_description"));const m=()=>{d.textContent=i.value,this.defaultCurrentLevel=i.value,chrome.runtime.sendMessage({action:e,tabId:l},(e=>{if(null!==e.gainValue){const t=parseInt(100*e.gainValue,10);i.value=t;const n=new Event("input");i.dispatchEvent(n)}}))},g=()=>{s((()=>{const e=(e=>e.filter((e=>r.date>=new Date(e.dateFrom))).filter((e=>r.date<=new Date(e.dateTo))).filter((e=>-1===r.usedIds.indexOf(e.id))).filter((e=>e.fromInstall<=Math.floor((r.date-r.installationDate)/1e3/60/60/23))).pop())(t);e&&(e=>{document.querySelector(".announcement").classList.add("is-active"),document.querySelector(".announcement-close").dataset.id=e.id,document.querySelector(".announcement-title").innerHTML=e.title,document.querySelector(".announcement-message").innerHTML=e.message})(e)}))},v=(e,t="")=>{d.textContent=e,chrome.runtime.sendMessage({action:"change-volume",tabId:l,sliderValue:e,from:t})};i.addEventListener("input",(e=>{v(e.target.value,"input"),chrome.tabs.query({currentWindow:!0,active:!0},(function(t){var n=t[0];chrome.tabs.sendMessage(n.id,{action:"visualizeVolume",data:{volume:e.target.value}})}))})),c.addEventListener("click",(e=>{e.preventDefault();const t=e.target.closest(".tab"),n=parseInt(t.dataset.tabId,10);chrome.tabs.update(n,{active:!0},(e=>{chrome.windows.update(e.windowId,{focused:!0})}))})),document.documentElement.addEventListener("keypress",(e=>{if(e.preventDefault(),keyValue=e.key.toLowerCase(),keyValueNumber=+keyValue,!isNaN(keyValueNumber)){const e=100*keyValueNumber,t=i.max;if(i.min<=e&&e<=t)return i.value=e,void v(e,"keypress")}return"r"===keyValue?void window.location.reload():void 0})),chrome.tabs.query({active:!0,currentWindow:!0},(e=>{if(l=e[0].id,chrome.runtime.lastError)return o.dce("ERROR:",chrome.runtime.lastError);m(),g(),chrome.tabs.query({audible:!0},(e=>{e.sort(((e,t)=>t.id-e.id)),u.textContent=0<e.length?"Tabs playing audio right now":"No tabs playing audio right now",e.forEach((e=>{const t=document.getElementById("tab-template").content;t.querySelector(".tab").dataset.tabId=e.id,t.querySelector(".tab-icon-image").src=e.favIconUrl,t.querySelector(".tab-title").textContent=e.title,c.appendChild(document.importNode(t,!0))}))}))})),document.getElementsByClassName("returnToDefaultVolumeLevel")[0].addEventListener("click",(()=>{d.textContent=this.defaultCurrentLevel,chrome.runtime.sendMessage({action:e,tabId:l,volumeLevel:this.defaultCurrentLevel},(e=>{null!==e.gainValue&&(i.value=e.gainValue)}))}))}();