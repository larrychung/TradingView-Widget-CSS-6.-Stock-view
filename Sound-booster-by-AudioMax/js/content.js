$((function(){window.___VBVisualizer||new VolumeVisualiser}));class VolumeVisualiser{constructor(){this.maxVolume=600,this.run(),this.updateVolume=this.updateVolume.bind(this)}run(){this.createHtml(),this.initListeners()}initListeners(){chrome.runtime.onMessage.addListener((({action:e,data:s})=>{switch(e){case"visualizeVolume":this.updateVolume(s.volume);case"increase_volume":case"decrease_volume":chrome.runtime.sendMessage({action:s.action,tabId:s.tabId,sliderValue:s.sliderValue}),this.updateVolume(s.sliderValue)}}))}createHtml(){this.$visualizer||(this.$visualizer=$('\n            <div id="volume-booster-visusalizer">\n                <div class="sound">\n                    <div class="sound-icon"></div>\n                    <div class="sound-wave sound-wave_one"></div>\n                    <div class="sound-wave sound-wave_two"></div>\n                    <div class="sound-wave sound-wave_three"></div>\n                </div>\n                <div class="segments-box">\n                    <div data-range="1-20" class="segment"><span></span></div>\n                    <div data-range="21-40" class="segment"><span></span></div>\n                    <div data-range="41-60" class="segment"><span></span></div>\n                    <div data-range="61-80" class="segment"><span></span></div>\n                    <div data-range="81-100" class="segment"><span></span></div>\n                </div>\n            </div>\n        '),this.$visualizer.appendTo("body"))}updateVolume(e){if(!Number.isInteger(e))return;const s=parseInt(100*e/this.maxVolume);this.$visualizer.css({display:"flex",opacity:1}),clearInterval(this._fadeInterval),clearTimeout(this._fadeTimeout),this.updateSegments(s),this.$visualizer.find(".sound").toggleClass("sound-mute",s<1),this.hideVisualizer()}updateSegments(e){this.$visualizer.find(".segment").each((function(){const s=$(this),i=$(this).find("span"),a=+s.data("range").split("-")[0],t=+s.data("range").split("-")[1];if(e>t)i.css("height","100%");else if(e>=a&&e<=t){let s=100-100*(t-e)/20;i.css("height",`${s}%`)}else i.css("height","0")}))}hideVisualizer(){this._fadeTimeout=setTimeout((()=>{this._fadeInterval=setInterval((()=>{this.$visualizer[0].style.opacity||(fadeTarget.style.opacity=1),this.$visualizer[0].style.opacity>0?this.$visualizer[0].style.opacity-=.01:(this.$visualizer.css("display","none"),clearInterval(this._fadeInterval))}),10)}),800)}}